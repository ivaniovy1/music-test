<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ê–≤—Ç–æ–§–æ–Ω–∫–µ—Ä ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ñ–æ–Ω–∫-—Ç—Ä–µ–∫–æ–≤</title>
<style>
  body {
    background: #121212;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 2rem;
    min-height: 100vh;
    margin: 0;
  }
  h1 {
    margin-bottom: 1rem;
    font-weight: 700;
  }
  .styles {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
  }
  .style-btn {
    background: #222;
    border: 2px solid transparent;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    cursor: pointer;
    transition: border-color 0.3s;
    user-select: none;
  }
  .style-btn.selected {
    border-color: #fuchsia;
    background: #330033;
  }
  button.generate {
    background: #fuchsia;
    color: #121212;
    border: none;
    padding: 1rem 2rem;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background 0.3s;
    margin-bottom: 1rem;
  }
  button.generate:hover:not(:disabled) {
    background: #ff00ffcc;
  }
  button.generate:disabled {
    background: #99009988;
    cursor: default;
  }
  audio {
    margin-top: 1rem;
    width: 100%;
    max-width: 400px;
    outline: none;
    border-radius: 8px;
    background: #222;
  }
  .info {
    margin-top: 1rem;
    font-style: italic;
    color: #bbb;
    min-height: 1.2em;
  }
</style>
</head>
<body>

<h1>–ê–≤—Ç–æ–§–æ–Ω–∫–µ—Ä</h1>

<div class="styles" role="radiogroup" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å —Ñ–æ–Ω–∫–∞">
  <div class="style-btn selected" data-style="memphis" role="radio" aria-checked="true" tabindex="0">Memphis 90‚Äôs</div>
  <div class="style-btn" data-style="drift" role="radio" aria-checked="false" tabindex="-1">Drift/Car meet</div>
  <div class="style-btn" data-style="dark" role="radio" aria-checked="false" tabindex="-1">Dark/Slowed</div>
  <div class="style-btn" data-style="cowbell" role="radio" aria-checked="false" tabindex="-1">Cowbell-heavy</div>
</div>

<button class="generate">–°–¥–µ–ª–∞—Ç—å —Ç—Ä–µ–∫</button>

<audio controls hidden></audio>

<div class="info">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–°–¥–µ–ª–∞—Ç—å —Ç—Ä–µ–∫¬ª</div>

<script>
  const styleButtons = document.querySelectorAll('.style-btn');
  const generateBtn = document.querySelector('button.generate');
  const audioPlayer = document.querySelector('audio');
  const info = document.querySelector('.info');

  let selectedStyle = 'memphis';
  let isGenerating = false;

  // –ó–∞–≥–ª—É—à–µ—á–Ω—ã–µ —Ç—Ä–µ–∫–∏ (–∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ–æ–Ω–∫-—Å—ç–º–ø–ª—ã –Ω–∞ base64, —Ç—É—Ç –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞)
  const dummyTracks = {
    memphis: [
      'data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjYwLjEwNAAAAAAAAAAAAAAA//uQxAAABAAAAABAAZGF0YQAAAABmZ2ZnZmZnZg==', // –ø—É—Å—Ç–æ–π –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π mp3 (–ø—Ä–∏–º–µ—Ä)
      'data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjYwLjEwNAAAAAAAAAAAAAAA//uQxAAABAAAAABAAZGF0YQAAAABmZmZmZmZmZmZm', 
    ],
    drift: [
      'data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjYwLjEwNAAAAAAAAAAAAAAA//uQxAAABAAAAABAAZGF0YQAAAABmZmZmZmZmZmZm',
    ],
    dark: [
      'data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjYwLjEwNAAAAAAAAAAAAAAA//uQxAAABAAAAABAAZGF0YQAAAABmZmZmZmZmZmZm',
    ],
    cowbell: [
      'data:audio/mp3;base64,SUQzAwAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjYwLjEwNAAAAAAAAAAAAAAA//uQxAAABAAAAABAAZGF0YQAAAABmZmZmZmZmZmZm',
    ]
  };

  function updateSelectedStyle(newStyle, clickedBtn) {
    if (isGenerating) return;
    selectedStyle = newStyle;
    styleButtons.forEach(btn => {
      btn.classList.remove('selected');
      btn.setAttribute('aria-checked', 'false');
      btn.tabIndex = -1;
    });
    clickedBtn.classList.add('selected');
    clickedBtn.setAttribute('aria-checked', 'true');
    clickedBtn.tabIndex = 0;
    clickedBtn.focus();
    info.textContent = `–í—ã–±—Ä–∞–Ω —Å—Ç–∏–ª—å: ${newStyle}`;
  }

  styleButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      updateSelectedStyle(btn.dataset.style, btn);
    });
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        updateSelectedStyle(btn.dataset.style, btn);
      }
    });
  });

  function fakeGenerateTrack(style) {
    return new Promise((resolve) => {
      info.textContent = `–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∞ –≤ —Å—Ç–∏–ª–µ ${style}... üé∂`;
      generateBtn.disabled = true;
      // –ò–º–∏—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é 3 —Å–µ–∫—É–Ω–¥—ã
      setTimeout(() => {
        // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π dummy —Ç—Ä–µ–∫
        const tracks = dummyTracks[style];
        const track = tracks[Math.floor(Math.random() * tracks.length)];
        resolve(track);
      }, 3000);
    });
  }

  async function generateTrack() {
    if (isGenerating) return;
    isGenerating = true;
    const trackDataUrl = await fakeGenerateTrack(selectedStyle);
    audioPlayer.src = trackDataUrl;
    audioPlayer.hidden = false;
    audioPlayer.play();
    info.textContent = `–ì–æ—Ç–æ–≤–æ! –í–æ—Ç —Ç—Ä–µ–∫ –≤ —Å—Ç–∏–ª–µ ${selectedStyle}. –ú–æ–∂–Ω–æ —Å–ª—É—à–∞—Ç—å –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –µ—â—ë –æ–¥–∏–Ω.`;
    generateBtn.disabled = false;
    isGenerating = false;
  }

  generateBtn.addEventListener('click', generateTrack);

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  info.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ ¬´–°–¥–µ–ª–∞—Ç—å —Ç—Ä–µ–∫¬ª';

</script>

</body>
</html>
